# =================================================================
# SPRING BOOT APPLICATION CONFIGURATION
# =================================================================

# =================================================================
# SERVER CONFIGURATION
# =================================================================
server.port=8080

# =================================================================
# DATABASE CONFIGURATION (PostgreSQL on AWS RDS)
# =================================================================
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://photo-lottery-db.cje6qg08snl3.ap-southeast-1.rds.amazonaws.com:5432/postgres}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:Thailandban91111__}
spring.datasource.driver-class-name=org.postgresql.Driver

# =================================================================
# JPA/HIBERNATE CONFIGURATION
# =================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=${FORMAT_SQL:false}
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# NAMING STRATEGY - Automatically converts camelCase to snake_case
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy

# =================================================================
# FLYWAY DATABASE MIGRATION (? NEW for notifications table)
# =================================================================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.repair-on-migrate=true
spring.flyway.clean-disabled=true
# =================================================================
# AWS S3 CONFIGURATION
# =================================================================
aws.access.key=${AWS_ACCESS_KEY:AKIAW7TIP7GWIEKY2UAU}
aws.secret.key=${AWS_SECRET_KEY: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}
aws.region=${AWS_REGION:ap-southeast-1}
aws.bucket.name=${AWS_BUCKET_NAME:photo-lottery-bucket-p2025}

# =================================================================
# FILE UPLOAD CONFIGURATION
# =================================================================
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.enabled=true

# =================================================================
# EMAIL CONFIGURATION (Gmail SMTP) - ENHANCED
# =================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_USERNAME:modernadventure805@gmail.com}
spring.mail.password=${EMAIL_PASSWORD:sohecvaohhbzmyvr}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.timeout=20000
spring.mail.properties.mail.smtp.connectiontimeout=20000
spring.mail.properties.mail.smtp.writetimeout=20000

# Application-specific email settings
app.mail.from=noreply@photolottery.com
app.name=Photo Lottery

# =================================================================
# JWT SECURITY CONFIGURATION
# =================================================================
jwt.secret=${JWT_SECRET:PhotoLotterySecureJWTKey2024ApplicationSecretForTokenGeneration123456789}
jwt.expiration=${JWT_EXPIRATION:86400000}

# =================================================================
# CORS CONFIGURATION
# =================================================================
spring.web.cors.allowed-origins=${CORS_ORIGINS:http://localhost:3000,https://your-production-domain.com}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true

# =================================================================
# APPLICATION URLs
# =================================================================
app.frontend.url=http://localhost:3000
app.backend.url=http://localhost:8080

# =================================================================
# ? NOTIFICATION SYSTEM CONFIGURATION (NEW)
# =================================================================
notification.cleanup.retention-days=30
notification.cleanup.enabled=true
notification.email.enabled=true
notification.email.batch-size=100
notification.scheduling.enabled=true
notification.scheduling.countdown-check-interval=60000

# =================================================================
# ? ASYNC TASK CONFIGURATION (NEW)
# =================================================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=500
spring.task.execution.thread-name-prefix=notification-

spring.task.scheduling.pool.size=3
spring.task.scheduling.thread-name-prefix=scheduler-

# =================================================================
# LOGGING CONFIGURATION - ENHANCED
# =================================================================
logging.level.com.amazonaws=${AWS_LOG_LEVEL:WARN}
logging.level.software.amazon.awssdk=${AWS_SDK_LOG_LEVEL:WARN}
logging.level.root=${ROOT_LOG_LEVEL:INFO}
logging.level.Bitcoin.Building.up.a.Bitcoin.application=${APP_LOG_LEVEL:INFO}

# ? NEW: Notification-specific logging
logging.level.Bitcoin.Building.up.a.Bitcoin.application.NotificationService=DEBUG
logging.level.Bitcoin.Building.up.a.Bitcoin.application.NotificationScheduler=INFO
logging.level.Bitcoin.Building.up.a.Bitcoin.application.EmailService=INFO

# =================================================================
# ACTUATOR CONFIGURATION (Health Monitoring)
# =================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# =================================================================
# API DOCUMENTATION CONFIGURATION
# =================================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method

# =================================================================
# COIN SYSTEM SETTINGS
# =================================================================
app.coins.photo-upload-reward=25
app.coins.daily-login-reward=10
app.coins.welcome-bonus=100

# HikariCP Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000