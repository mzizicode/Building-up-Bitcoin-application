# =================================================================
# SPRING BOOT APPLICATION CONFIGURATION (UPDATED FOR LOTTERY SYSTEM)
# =================================================================

# =================================================================
# SERVER CONFIGURATION
# =================================================================
server.port=8080

# =================================================================
# DATABASE CONFIGURATION (PostgreSQL) - FIXED
# =================================================================
spring.datasource.url=jdbc:postgresql://photo-lottery-db.cje6qg08snl3.ap-southeast-1.rds.amazonaws.com:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=Thailandban91111__
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Settings - ENHANCED
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.leak-detection-threshold=60000

# =================================================================
# JPA/HIBERNATE CONFIGURATION - FIXED
# =================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.open-in-view=false


# NAMING STRATEGY - CRITICAL FIX
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
spring.jpa.hibernate.naming.implicit-strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy

# =================================================================
# FLYWAY DATABASE MIGRATION - ENABLED FOR NEW FEATURES
# =================================================================
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# =================================================================
# LOGGING CONFIGURATION - ENHANCED FOR DEBUGGING
# =================================================================
logging.level.root=INFO
logging.level.Bitcoin.Building.up.a.Bitcoin.application=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.security=INFO

# =================================================================
# JWT SECURITY CONFIGURATION
# =================================================================
jwt.secret=PhotoLotterySecureJWTKey2024ApplicationSecretForTokenGeneration123456789
jwt.expiration=86400000

# =================================================================
# EMAIL CONFIGURATION (Gmail SMTP)
# =================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=modernadventure805@gmail.com
spring.mail.password=sohecvaohhbzmyvr
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.timeout=20000
spring.mail.properties.mail.smtp.connectiontimeout=20000
spring.mail.properties.mail.smtp.writetimeout=20000

# Application-specific email settings
app.mail.from=noreply@photolottery.com
app.name=Photo Lottery
app.frontend.url=http://localhost:3000
app.backend.url=http://localhost:8080

# =================================================================
# AWS S3 CONFIGURATION
# =================================================================
aws.access.key=AKIAW7TIP7GWIEKY2UAU
aws.secret.key=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
aws.region=ap-southeast-1
aws.bucket.name=photo-lottery-bucket-p2025

# =================================================================
# OPENAI CONFIGURATION (NEW - FOR AI IMAGE DESCRIPTIONS)
# =================================================================
# Replace with your actual OpenAI API key
openai.api.key=${OPENAI_API_KEY:your-openai-api-key-here}

# =================================================================
# LOTTERY SYSTEM CONFIGURATION (NEW)
# =================================================================
lottery.winner.coins=100
lottery.participant.coins=20
lottery.draw.interval.hours=24
lottery.start.time=2025-01-01T00:00:00

# =================================================================
# MARKETPLACE CONFIGURATION (NEW)
# =================================================================
marketplace.listing.reward.coins=10
marketplace.purchase.completion.buyer.coins=5
marketplace.purchase.completion.seller.coins=10
marketplace.auto.complete.days=7

# =================================================================
# FILE UPLOAD CONFIGURATION
# =================================================================
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB
spring.servlet.multipart.enabled=true

# =================================================================
# ASYNC TASK CONFIGURATION
# =================================================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=500
spring.task.execution.thread-name-prefix=notification-

spring.task.scheduling.pool.size=3
spring.task.scheduling.thread-name-prefix=scheduler-

# =================================================================
# ACTUATOR CONFIGURATION (Health Monitoring)
# =================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.info.env.enabled=true

# =================================================================
# ADMIN CONFIGURATION (NEW)
# =================================================================
admin.default.email=admin@photolottery.com
admin.default.password=AdminPassword123!

# =================================================================
# SECURITY CONFIGURATION (ENHANCED)
# =================================================================
# Enable method-level security
spring.security.method.enabled=true